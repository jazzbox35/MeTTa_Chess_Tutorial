( highestrank k )
( highrank q )
( medrank r )
( medrank b )
( medrank n )
( lowrank p )
( rank k )
( rank q )
( rank r )
( rank b )
( rank n )
( rank p )
( game-state initializing )
(= ( nth $_1288382 $_1288388 )
    ( if
        ( == $_1288382 1 )
        ( car-atom $_1288388 )
        ( nth
            ( - $_1288382 1 )
            ( cdr-atom $_1288388 )
        )
    )
)
(= ( contains_symbol $_1288214 $_1288220 )
    ( if
        ( == $_1288214
            ( )
        )
        false
        ( if
            ( ==
                ( car-atom $_1288214 )
                $_1288220 )
            true
            ( contains_symbol
                ( cdr-atom $_1288214 )
                $_1288220 )
        )
    )
)
(= ( char_to_int $_1287758 )
    ( case $_1287758
        ( ( 1 1 )
            ( 2 2 )
            ( 3 3 )
            ( 4 4 )
            ( 5 5 )
            ( 6 6 )
            ( 7 7 )
            ( 8 8 )
            ( a 1 )
            ( b 2 )
            ( c 3 )
            ( d 4 )
            ( e 5 )
            ( f 6 )
            ( g 7 )
            ( h 8 )
            ( $_1288178 NIL )
        )
    )
)
(= ( int_to_char $_1287542 )
    ( case $_1287542
        ( ( 1 a )
            ( 2 b )
            ( 3 c )
            ( 4 d )
            ( 5 e )
            ( 6 f )
            ( 7 g )
            ( 8 h )
            ( $_1287722 ? )
        )
    )
)
(= ( return_length $_1287458 )
    ( let $_1287476
        ( stringToChars $_1287458 )
        ( size-atom $_1287476 )
    )
)
(= ( convert_x_letter $_1287056 )
    ( let*
        ( ( $_1287086
                ( nth 1 $_1287056 )
            )
            ( $_1287122
                ( int_to_char $_1287086 )
            )
            ( $_1287152
                ( nth 2 $_1287056 )
            )
        )
        ( if
            ( ==
                ( size-atom $_1287056 )
                2 )
            ( $_1287122 $_1287152 )
            ( let*
                ( ( $_1287272
                        ( nth 3 $_1287056 )
                    )
                    ( $_1287308
                        ( nth 4 $_1287056 )
                    )
                )
                ( if
                    ( == $_1287272 s )
                    ( $_1287122 $_1287152 white $_1287308 )
                    ( $_1287122 $_1287152 black $_1287308 )
                )
            )
        )
    )
)
(= ( concat_lists $_1286672 )
    ( if
        ( == $_1286672
            ( )
        )
        ( )
        ( let $_1286732
            ( car-atom $_1286672 )
            ( if
                ( == $_1286732
                    ( )
                )
                ( concat_lists
                    ( cdr-atom $_1286672 )
                )
                ( let*
                    ( ( $_1286846
                            ( car-atom $_1286732 )
                        )
                        ( $_1286876
                            ( cdr-atom $_1286732 )
                        )
                        ( $_1286906
                            ( cdr-atom $_1286672 )
                        )
                    )
                    ( let $_1286942
                        ( cons-atom $_1286876 $_1286906 )
                        ( let $_1286984
                            ( concat_lists $_1286942 )
                            ( cons-atom $_1286846 $_1286984 )
                        )
                    )
                )
            )
        )
    )
)
(= ( addit_list $_1286540 )
    ( if
        ( == $_1286540
            ( )
        )
        0
        ( +
            ( car-atom $_1286540 )
            ( addit_list
                ( cdr-atom $_1286540 )
            )
        )
    )
)
( :
    ( progq )
    ( -> Expression Atom )
)
(= ( progq $_1286342 )
    ( if
        ( == $_1286342
            ( )
        )
        ( )
        ( let $_1286402
            ( unquote
                ( car-atom $_1286342 )
            )
            ( progq
                ( cdr-atom $_1286342 )
            )
        )
    )
)
( g k k )
( g q q )
( g r r )
( g b b )
( g n n )
( g p p )
( s k k )
( s q q )
( s r r )
( s b b )
( s n n )
( s p p )
(= ( add-pieces $_1285832 )
    ( if
        ( == $_1285832
            ( )
        )
        true
        ( let*
            ( ( $_1285904
                    ( car-atom $_1285832 )
                )
                ( $_1285934
                    ( cons-atom square $_1285904 )
                )
                ( $_1285970
                    ( add-atom &self $_1285934 )
                )
            )
            ( add-pieces
                ( cdr-atom $_1285832 )
            )
        )
    )
)
(= ( reset-pieces $_1285676 )
    ( progn
        ( remove-atom &self
            ( square $_1285724 $_1285730 $_1285736 $_1285742 )
        )
        ( remove-atom &self
            ( square $_1285724 $_1285730 )
        )
        ( add-pieces $_1285676 )
    )
)
(= ( delete-pieces )
    ( progn
        ( remove-atom &self
            ( square $_1285586 $_1285592 $_1285598 $_1285604 )
        )
        ( remove-atom &self
            ( square $_1285586 $_1285592 )
        )
    )
)
(= ( delete-temporary-atoms )
    ( match &self
        ( score $_1285394 $_1285400 $_1285406 $_1285412 $_1285418 $_1285424 $_1285430 $_1285436 )
        ( remove-atom &self
            ( score $_1285394 $_1285400 $_1285406 $_1285412 $_1285418 $_1285424 $_1285430 $_1285436 )
        )
    )
)
(= ( delete-prior-game-states )
    ( collapse
        ( match &self
            ( game-state $_1285298 )
            ( remove-atom &self
                ( game-state $_1285298 )
            )
        )
    )
)
(= ( change-game-state $_1285166 )
    ( progn
        ( delete-prior-game-states )
        ( add-atom &self
            ( game-state $_1285166 )
        )
    )
)
(= ( lots_of_pawns_in_home_row )
    ( let $_1284974
        ( collapse
            ( match &self
                ( square $_1285022 7 g p )
                ( square $_1285022 $_1285064 $_1285070 $_1285076 )
            )
        )
        ( if
            ( >
                ( size-atom $_1284974 )
                6 )
            true false )
    )
)
(= ( display_squares_atoms_debug_4 )
    ( collapse
        ( match &self
            ( square $_1284878 $_1284884 $_1284890 $_1284896 )
            ( square $_1284878 $_1284884 $_1284890 $_1284896 )
        )
    )
)
(= ( display_squares_atoms_debug_2 )
    ( collapse
        ( match &self
            ( square $_1284776 $_1284782 )
            ( square $_1284776 $_1284782 )
        )
    )
)
(= ( display_scores_debug )
    ( collapse
        ( match &self
            ( score $_1284602 $_1284608 $_1284614 $_1284620 $_1284626 $_1284632 $_1284638 $_1284644 )
            ( score $_1284602 $_1284608 $_1284614 $_1284620 $_1284626 $_1284632 $_1284638 $_1284644 )
        )
    )
)
(= ( display-game-state )
    ( match &self
        ( game-state $_1284512 )
        ( println $_1284512 )
    )
)
(= ( get-player-command $_1284242 )
    ( let $_1284260
        ( get-single-char! )
        ( progn
            ( if
                ( ==
                    ( size-atom $_1284242 )
                    0 )
                ( flush-output! )
                ( )
            )
            ( if
                ( == $_1284260 13 )
                $_1284242
                ( let $_1284410
                    ( cons-atom $_1284260 $_1284242 )
                    ( get-player-command $_1284410 )
                )
            )
        )
    )
)
(= ( welcome )
    ( welcome! )
)
( :
    ( identify_piece )
    ( -> Expression Atom )
)
(= ( identify_piece $_1283912 )
    ( if
        ( ==
            ( size-atom $_1283912 )
            2 )
        .
        ( let*
            ( ( $_1284002
                    ( nth 3 $_1283912 )
                )
                ( $_1284038
                    ( nth 4 $_1283912 )
                )
                ( $_1284074
                    ( match &self
                        ( $_1284002 $_1284038 $_1284116 )
                        $_1284116 )
                )
            )
            $_1284074 )
    )
)
( :
    ( identify_piece_text )
    ( -> Expression Atom )
)
(= ( identify_piece_text $_1283576 )
    ( if
        ( ==
            ( size-atom $_1283576 )
            2 )
        ( let*
            ( ( $_1283666
                    ( contains_symbol $_1283576 s )
                )
                ( $_1283702
                    ( if
                        ( == $_1283666 true )
                        * )
                )
                ( $_1283768
                    ( nth 4 $_1283576 )
                )
            )
            ( format-args {}{}
                ( $_1283702 $_1283768 )
            )
        )
    )
)
( :
    ( display_filter )
    ( -> Expression Expression )
)
(= ( display_filter $_1283264 )
    ( if
        ( ==
            ( size-atom $_1283264 )
            1 )
        ( let $_1283330
            ( identify_piece
                ( car-atom $_1283264 )
            )
            ( $_1283330 )
        )
        ( let*
            ( ( $_1283402
                    ( display_filter
                        ( cdr-atom $_1283264 )
                    )
                )
                ( $_1283444
                    ( identify_piece
                        ( car-atom $_1283264 )
                    )
                )
            )
            ( cons-atom $_1283444 $_1283402 )
        )
    )
)
(= ( display_board $_1283216 )
    ( println OK )
)
(= ( display_board_text $_1283174 )
    ( $_1283174 )
)
(= ( game-still-playing )
    ( match &self
        ( game-state $_1283060 )
        ( if
            ( or
                ( == checkmate $_1283060 )
                ( == resigned $_1283060 )
            )
            false true )
    )
)
(= ( prompt-for-move )
    ( OK )
)
(= ( decide_greedy_move )
    ( let*
        ( ( $_1281878
                ( println looking for checkmate... )
            )
            ( $_1281920
                ( collapse
                    ( if
                        ( ==
                            ( lots_of_pawns_in_home_row )
                            true )
                        ( empty )
                        ( attemptcheckmate )
                    )
                )
            )
        )
        ( if
            ( not
                ( == $_1281920
                    ( )
                )
            )
            ( car-atom $_1281920 )
            ( let*
                ( ( $_1282094
                        ( println looking for capture... )
                    )
                    ( $_1282134
                        ( collapse
                            ( takehighestopen_scored )
                        )
                    )
                )
                ( if
                    ( not
                        ( == $_1282134
                            ( )
                        )
                    )
                    ( car-atom $_1282134 )
                    ( let*
                        ( ( $_1282254
                                ( println looking to play defense... )
                            )
                            ( $_1282296
                                ( collapse
                                    ( playdefense )
                                )
                            )
                        )
                        ( if
                            ( not
                                ( == $_1282296
                                    ( )
                                )
                            )
                            ( car-atom $_1282296 )
                            ( let*
                                ( ( $_1282416
                                        ( println looking for threat position... )
                                    )
                                    ( $_1282458
                                        ( random-int &rng 1 2 )
                                    )
                                    ( $_1282500
                                        ( if
                                            ( > $_1282458 1 )
                                            ( collapse
                                                ( movetoposition )
                                            )
                                            ( )
                                        )
                                    )
                                )
                                ( if
                                    ( not
                                        ( == $_1282500
                                            ( )
                                        )
                                    )
                                    ( car-atom $_1282500 )
                                    ( let*
                                        ( ( $_1282662
                                                ( println looking for random move... )
                                            )
                                            ( $_1282704
                                                ( collapse
                                                    ( random_move_empty_sq )
                                                )
                                            )
                                        )
                                        ( if
                                            ( not
                                                ( == $_1282704
                                                    ( )
                                                )
                                            )
                                            ( car-atom $_1282704 )
                                            ( let*
                                                ( ( $_1282824
                                                        ( println looking for desperation move... )
                                                    )
                                                    ( $_1282868
                                                        ( collapse
                                                            ( random_move_empty_sq_desperate )
                                                        )
                                                    )
                                                )
                                                ( if
                                                    ( not
                                                        ( == $_1282868
                                                            ( )
                                                        )
                                                    )
                                                    ( car-atom $_1282868 )
                                                    ( )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
    )
)
(= ( try_move_and_verify
        ( $_1281038 $_1281044 g $_1281056 )
        ( $_1281068 $_1281074 )
        $_1281080 )
    ( let*
        ( ( $_1281110
                ( $_1281038 $_1281044 g $_1281056 )
            )
            ( $_1281152
                ( $_1281068 $_1281074 )
            )
            ( $_1281182
                ( return_entire_box $_1281152 )
            )
            ( $_1281212
                ( move_piece $_1281110 $_1281152 )
            )
            ( $_1281248
                ( take_dest
                    ( $_1281068 $_1281074 )
                    s )
            )
        )
        ( if
            ( == $_1281248 true )
            ( let $_1281212
                ( reset_pieces $_1281110 $_1281182 )
                ( empty )
            )
            ( let*
                ( ( $_1281404
                        ( xy_box
                            ( g k )
                        )
                    )
                    ( $_1281446
                        ( return_entire_box $_1281404 )
                    )
                    ( $_1281476
                        ( take_dest $_1281446 s )
                    )
                )
                ( if
                    ( == $_1281476 true )
                    ( let $_1281212
                        ( reset_pieces $_1281110 $_1281182 )
                        ( empty )
                    )
                    ( let*
                        ( ( $_1281620
                                ( case $_1281080
                                    ( ( 1
                                            ( score_move
                                                ( $_1281038 $_1281044 g $_1281056 )
                                                ( $_1281068 $_1281074 )
                                            )
                                        )
                                        ( 0 0 )
                                    )
                                )
                            )
                            ( $_1281212
                                ( reset_pieces $_1281110 $_1281182 )
                            )
                        )
                        ( ( $_1281038 $_1281044 g $_1281056 )
                            ( $_1281068 $_1281074 )
                        )
                    )
                )
            )
        )
    )
)
(= ( find_by_rank_move_empty_sq $_1280726 )
    ( match &self
        ( ,
            ( $_1280726 $_1280774 )
            ( square $_1280792 $_1280798 g $_1280774 )
            ( square $_1280828 $_1280834 )
        )
        ( if
            ( ==
                ( clear_route
                    ( $_1280792 $_1280798 g $_1280774 )
                    ( $_1280828 $_1280834 )
                )
                true )
            ( try_move_and_verify
                ( $_1280792 $_1280798 g $_1280774 )
                ( $_1280828 $_1280834 )
                0 )
            ( empty )
        )
    )
)
(= ( return_random_level $_1280186 )
    ( if
        ( ==
            ( size-atom $_1280186 )
            4 )
        NIL
        ( let*
            ( ( $_1280270
                    ( if
                        ( and
                            ( ==
                                ( lots_of_pawns_in_home_row )
                                true )
                            ( not
                                ( ==
                                    ( intersection-atom $_1280186
                                        ( lowrank )
                                    )
                                    ( lowrank )
                                )
                            )
                        )
                        1
                        ( random-int &rng 1 7 )
                    )
                )
                ( $_1280438
                    ( case $_1280270
                        ( ( 1 lowrank )
                            ( 2 medrank )
                            ( 3 highrank )
                            ( 4 lowrank )
                            ( 5 medrank )
                            ( 6 highrank )
                            ( 7 highestrank )
                            ( $_1280600 lowrank )
                        )
                    )
                )
            )
            ( if
                ( ==
                    ( $_1280438 )
                    ( intersection-atom $_1280186
                        ( $_1280438 )
                    )
                )
                ( return_random_level $_1280186 )
                $_1280438 )
        )
    )
)
(= ( random_recursion_by_rank $_1279934 )
    ( let*
        ( ( $_1279964
                ( return_random_level $_1279934 )
            )
        )
        ( if
            ( == $_1279964 NIL )
            ( empty )
            ( let $_1280048
                ( collapse
                    ( find_by_rank_move_empty_sq $_1279964 )
                )
                ( if
                    ( == $_1280048
                        ( )
                    )
                    ( random_recursion_by_rank
                        ( cons-atom $_1279964 $_1279934 )
                    )
                    $_1280048 )
            )
        )
    )
)
(= ( random_move_empty_sq )
    ( let $_1279580
        ( collapse
            ( random_recursion_by_rank
                ( )
            )
        )
        ( if
            ( == $_1279580
                ( )
            )
            ( empty )
            ( let*
                ( ( $_1279688
                        ( car-atom $_1279580 )
                    )
                    ( $_1279718
                        ( size-atom $_1279688 )
                    )
                    ( $_1279748
                        ( if
                            ( == $_1279718 2 )
                            1
                            ( random-int &rng 1 $_1279718 )
                        )
                    )
                    ( $_1279832
                        ( if
                            ( > $_1279748 $_1279718 )
                            1 $_1279748 )
                    )
                )
                ( nth $_1279832 $_1279688 )
            )
        )
    )
)
(= ( random_move_empty_sq_desperate )
    ( let $_1279430
        ( collapse
            ( any_moves_to_escape g )
        )
        ( if
            ( not
                ( == $_1279430
                    ( )
                )
            )
            ( car-atom $_1279430 )
            ( empty )
        )
    )
)
(= ( attemptcheckmate )
    ( let $_1278848
        ( collapse
            ( attemptcheckmate_match )
        )
        ( let $_1278890
            ( collapse
                ( let $_1278920
                    ( superpose $_1278848 )
                    ( let*
                        ( ( $_1278968
                                ( nth 1 $_1278920 )
                            )
                            ( $_1279004
                                ( nth 2 $_1278920 )
                            )
                            ( $_1279040
                                ( return_entire_box $_1279004 )
                            )
                            ( $_1279070
                                ( move_piece $_1278968 $_1279004 )
                            )
                            ( $_1279106
                                ( collapse
                                    ( any_moves_to_escape s )
                                )
                            )
                            ( $_1279148
                                ( checkking g )
                            )
                            ( $_1279178
                                ( reset_pieces $_1278968 $_1279040 )
                            )
                        )
                        ( if
                            ( and
                                ( == $_1279106
                                    ( )
                                )
                                ( == $_1279148 false )
                            )
                            $_1278920
                            ( empty )
                        )
                    )
                )
            )
            ( if
                ( == $_1278890
                    ( )
                )
                ( empty )
                ( progn
                    ( change-game-state checkmate )
                    ( car-atom $_1278890 )
                )
            )
        )
    )
)
(= ( attemptcheckmate_match )
    ( let $_1278446
        ( xy_box
            ( s k )
        )
        ( match &self
            ( square $_1278512 $_1278518 g $_1278530 )
            ( match &self
                ( square $_1278566 $_1278572 )
                ( if
                    ( and
                        ( ==
                            ( clear_route
                                ( $_1278512 $_1278518 g $_1278530 )
                                ( $_1278566 $_1278572 )
                            )
                            true )
                        ( ==
                            ( clear_route
                                ( $_1278566 $_1278572 g $_1278530 )
                                $_1278446 )
                            true )
                    )
                    ( ( $_1278512 $_1278518 g $_1278530 )
                        ( $_1278566 $_1278572 )
                    )
                    ( empty )
                )
            )
        )
    )
)
(= ( attemptcheckmate_match )
    ( let $_1278032
        ( xy_box
            ( s k )
        )
        ( match &self
            ( square $_1278098 $_1278104 g $_1278116 )
            ( match &self
                ( square $_1278152 $_1278158 s $_1278170 )
                ( if
                    ( and
                        ( ==
                            ( clear_route
                                ( $_1278098 $_1278104 g $_1278116 )
                                ( $_1278152 $_1278158 )
                            )
                            true )
                        ( ==
                            ( clear_route
                                ( $_1278152 $_1278158 g $_1278116 )
                                $_1278032 )
                            true )
                    )
                    ( ( $_1278098 $_1278104 g $_1278116 )
                        ( $_1278152 $_1278158 )
                    )
                    ( empty )
                )
            )
        )
    )
)
(= ( movetoposition )
    ( let $_1277696
        ( collapse
            ( movetoposition_match
                ( superpose
                    ( q r n b )
                )
                ( superpose
                    ( k q r n b )
                )
            )
        )
        ( if
            ( == $_1277696
                ( )
            )
            ( empty )
            ( let*
                ( ( $_1277888
                        ( size-atom $_1277696 )
                    )
                    ( $_1277918
                        ( random-int &rng 1 $_1277888 )
                    )
                    ( $_1277960
                        ( nth $_1277918 $_1277696 )
                    )
                )
                $_1277960 )
        )
    )
)
(= ( movetoposition_match $_1276916 $_1276922 )
    ( match &self
        ( square $_1276958 $_1276964 g $_1276916 )
        ( match &self
            ( square $_1277012 $_1277018 )
            ( if
                ( ==
                    ( clear_route
                        ( $_1276958 $_1276964 g $_1276916 )
                        ( $_1277012 $_1277018 )
                    )
                    true )
                ( match &self
                    ( square $_1277144 $_1277150 s $_1276922 )
                    ( if
                        ( ==
                            ( clear_route
                                ( $_1277012 $_1277018 g $_1276916 )
                                ( $_1277144 $_1277150 )
                            )
                            true )
                        ( let*
                            ( ( $_1277282
                                    ( move_piece
                                        ( $_1276958 $_1276964 g $_1276916 )
                                        ( $_1277012 $_1277018 )
                                    )
                                )
                                ( $_1277354
                                    ( take_dest
                                        ( $_1277012 $_1277018 )
                                        s )
                                )
                                ( $_1277402
                                    ( checkking g )
                                )
                                ( $_1277432
                                    ( reset_pieces
                                        ( $_1276958 $_1276964 g $_1276916 )
                                        ( $_1277012 $_1277018 )
                                    )
                                )
                            )
                            ( if
                                ( and
                                    ( == $_1277354 false )
                                    ( == $_1277402 false )
                                )
                                ( ( $_1276958 $_1276964 g $_1276916 )
                                    ( $_1277012 $_1277018 )
                                )
                                ( empty )
                            )
                        )
                        ( empty )
                    )
                )
                ( empty )
            )
        )
    )
)
(= ( playdefense )
    ( let $_1276634
        ( collapse
            ( playdefense_match
                ( superpose
                    ( k q r n b )
                )
            )
        )
        ( if
            ( == $_1276634
                ( )
            )
            ( empty )
            ( let*
                ( ( $_1276784
                        ( size-atom $_1276634 )
                    )
                    ( $_1276814
                        ( random-int &rng 1 $_1276784 )
                    )
                    ( $_1276856
                        ( nth $_1276814 $_1276634 )
                    )
                )
                $_1276856 )
        )
    )
)
(= ( playdefense_match $_1275758 )
    ( match &self
        ( square $_1275794 $_1275800 g $_1275758 )
        ( if
            ( ==
                ( take_dest
                    ( $_1275794 $_1275800 )
                    s )
                true )
            ( if
                ( or
                    ( ==
                        ( take_dest
                            ( $_1275794 $_1275800 )
                            g )
                        false )
                    ( and
                        ( ==
                            ( take_dest
                                ( $_1275794 $_1275800 )
                                g )
                            true )
                        ( == $_1275758 q )
                    )
                )
                ( match &self
                    ( square $_1276082 $_1276088 )
                    ( if
                        ( ==
                            ( clear_route
                                ( $_1275794 $_1275800 g $_1275758 )
                                ( $_1276082 $_1276088 )
                            )
                            true )
                        ( let*
                            ( ( $_1276208
                                    ( move_piece
                                        ( $_1275794 $_1275800 g $_1275758 )
                                        ( $_1276082 $_1276088 )
                                    )
                                )
                                ( $_1276280
                                    ( take_dest
                                        ( $_1276082 $_1276088 )
                                        s )
                                )
                                ( $_1276328
                                    ( checkking g )
                                )
                                ( $_1276358
                                    ( reset_pieces
                                        ( $_1275794 $_1275800 g $_1275758 )
                                        ( $_1276082 $_1276088 )
                                    )
                                )
                            )
                            ( if
                                ( and
                                    ( == $_1276280 false )
                                    ( == $_1276328 false )
                                )
                                ( ( $_1275794 $_1275800 g $_1275758 )
                                    ( $_1276082 $_1276088 )
                                )
                                ( empty )
                            )
                        )
                        ( empty )
                    )
                )
                ( empty )
            )
            ( empty )
        )
    )
)
(= ( playdefense_match $_1274996 )
    ( match &self
        ( square $_1275032 $_1275038 g $_1274996 )
        ( match &self
            ( square $_1275086 $_1275092 s p )
            ( if
                ( ==
                    ( clear_route
                        ( $_1275086 $_1275092 s p )
                        ( $_1275032 $_1275038 )
                    )
                    true )
                ( match &self
                    ( square $_1275230 $_1275236 )
                    ( if
                        ( ==
                            ( clear_route
                                ( $_1275032 $_1275038 g $_1274996 )
                                ( $_1275230 $_1275236 )
                            )
                            true )
                        ( let*
                            ( ( $_1275356
                                    ( move_piece
                                        ( $_1275032 $_1275038 g $_1274996 )
                                        ( $_1275230 $_1275236 )
                                    )
                                )
                                ( $_1275428
                                    ( take_dest
                                        ( $_1275230 $_1275236 )
                                        s )
                                )
                                ( $_1275476
                                    ( checkking g )
                                )
                                ( $_1275506
                                    ( reset_pieces
                                        ( $_1275032 $_1275038 g $_1274996 )
                                        ( $_1275230 $_1275236 )
                                    )
                                )
                            )
                            ( if
                                ( and
                                    ( == $_1275428 false )
                                    ( == $_1275476 false )
                                )
                                ( ( $_1275032 $_1275038 g $_1274996 )
                                    ( $_1275230 $_1275236 )
                                )
                                ( empty )
                            )
                        )
                        ( empty )
                    )
                )
                ( empty )
            )
        )
    )
)
(= ( takehighestopen_scored )
    ( let $_1274672
        ( collapse
            ( takehighestopen
                ( superpose
                    ( b r n q p )
                )
            )
        )
        ( if
            ( not
                ( == $_1274672
                    ( )
                )
            )
            ( let*
                ( ( $_1274822
                        ( collapse
                            ( finalize_all_scored_moves )
                        )
                    )
                    ( $_1274858
                        ( find_best_score $_1274822 )
                    )
                    ( $_1274888
                        ( cdr-atom $_1274858 )
                    )
                )
                ( let $_1274924
                    ( collapse
                        ( delete-temporary-atoms )
                    )
                    $_1274888 )
            )
            ( empty )
        )
    )
)
(= ( finalize_all_scored_moves )
    ( match &self
        ( score $_1274486 $_1274492 $_1274498 $_1274504 $_1274510 $_1274516 $_1274522 $_1274528 )
        ( let $_1274546
            ( + $_1274522 $_1274528 )
            ( $_1274546
                ( $_1274486 $_1274492 $_1274498 $_1274504 )
                ( $_1274510 $_1274516 )
            )
        )
    )
)
(= ( find_best_score $_1274000 )
    ( if
        ( ==
            ( size-atom $_1274000 )
            1 )
        ( car-atom $_1274000 )
        ( let*
            ( ( $_1274096
                    ( car-atom $_1274000 )
                )
                ( $_1274126
                    ( car-atom $_1274096 )
                )
                ( $_1274156
                    ( cdr-atom $_1274000 )
                )
                ( $_1274186
                    ( car-atom $_1274156 )
                )
                ( $_1274216
                    ( car-atom $_1274186 )
                )
            )
            ( if
                ( or
                    ( < $_1274126 $_1274216 )
                    ( == $_1274126 $_1274216 )
                )
                ( let*
                    ( ( $_1274336
                            ( cdr-atom $_1274156 )
                        )
                        ( $_1274366
                            ( cons-atom $_1274096 $_1274336 )
                        )
                    )
                    ( find_best_score $_1274366 )
                )
                ( find_best_score $_1274156 )
            )
        )
    )
)
(= ( takehighestopen $_1273622 )
    ( match &self
        ( square $_1273658 $_1273664 s $_1273622 )
        ( match &self
            ( square $_1273712 $_1273718 g p )
            ( if
                ( and
                    ( == $_1273664
                        ( - $_1273718 1 )
                    )
                    ( or
                        ( == $_1273658
                            ( - $_1273712 1 )
                        )
                        ( == $_1273658
                            ( + $_1273712 1 )
                        )
                    )
                )
                ( try_move_and_verify
                    ( $_1273712 $_1273718 g p )
                    ( $_1273658 $_1273664 )
                    1 )
                ( empty )
            )
        )
    )
)
(= ( takehighestopen $_1273268 )
    ( match &self
        ( square $_1273304 $_1273310 s $_1273268 )
        ( match &self
            ( square $_1273358 $_1273364 g $_1273376 )
            ( if
                ( and
                    ( ==
                        ( clear_route
                            ( $_1273358 $_1273364 g $_1273376 )
                            ( $_1273304 $_1273310 )
                        )
                        true )
                    ( not
                        ( == $_1273376 p )
                    )
                )
                ( try_move_and_verify
                    ( $_1273358 $_1273364 g $_1273376 )
                    ( $_1273304 $_1273310 )
                    1 )
                ( empty )
            )
        )
    )
)
(= ( take_dest_recursive $_1273070 $_1273076 $_1273082 )
    ( let*
        ( ( $_1273112
                ( takingboxes_recursive $_1273076 $_1273082 )
            )
            ( $_1273148
                ( list_clear_route $_1273082 $_1273070 $_1273112 )
            )
        )
        ( if
            ( not
                ( == $_1273148
                    ( )
                )
            )
            true false )
    )
)
(= ( take_dest $_1272878 $_1272884 )
    ( let*
        ( ( $_1272914
                ( collapse
                    ( takingboxes $_1272884 )
                )
            )
            ( $_1272956
                ( collapse
                    ( list_clear_route $_1272878 $_1272914 )
                )
            )
        )
        ( if
            ( == $_1272956
                ( )
            )
            false true )
    )
)
(= ( return_entire_box
        ( $_1272782 $_1272788 )
    )
    ( match &self
        ( square $_1272782 $_1272788 )
        ( $_1272782 $_1272788 )
    )
)
(= ( return_entire_box
        ( $_1272656 $_1272662 )
    )
    ( match &self
        ( square $_1272656 $_1272662 $_1272710 $_1272716 )
        ( $_1272656 $_1272662 $_1272710 $_1272716 )
    )
)
(= ( return_entire_box
        ( $_1272572 $_1272578 $_1272584 $_1272590 )
    )
    ( $_1272572 $_1272578 $_1272584 $_1272590 )
)
(= ( return_entire_box_sequential $_1272266 $_1272272 )
    ( if
        ( ==
            ( size-atom $_1272266 )
            4 )
        $_1272266
        ( let*
            ( ( $_1272356
                    ( car-atom $_1272272 )
                )
                ( $_1272386
                    ( nth 1 $_1272356 )
                )
                ( $_1272422
                    ( nth 2 $_1272356 )
                )
            )
            ( if
                ( ==
                    ( $_1272386 $_1272422 )
                    $_1272266 )
                $_1272356
                ( return_entire_box_sequential $_1272266
                    ( cdr-atom $_1272272 )
                )
            )
        )
    )
)
(= ( xy_box
        ( $_1272158 $_1272164 )
    )
    ( match &self
        ( square $_1272200 $_1272206 $_1272158 $_1272164 )
        ( $_1272200 $_1272206 )
    )
)
(= ( xy_box_recursive
        ( $_1271666 $_1271672 )
        $_1271678 )
    ( let*
        ( ( $_1271708
                ( car-atom $_1271678 )
            )
            ( $_1271738
                ( nth 1 $_1271708 )
            )
            ( $_1271774
                ( nth 2 $_1271708 )
            )
        )
        ( if
            ( ==
                ( size-atom $_1271708 )
                2 )
            ( xy_box_recursive
                ( $_1271666 $_1271672 )
                ( cdr-atom $_1271678 )
            )
            ( let*
                ( ( $_1271924
                        ( nth 3 $_1271708 )
                    )
                    ( $_1271960
                        ( nth 4 $_1271708 )
                    )
                )
                ( if
                    ( and
                        ( == $_1271924 $_1271666 )
                        ( == $_1271960 $_1271672 )
                    )
                    ( $_1271738 $_1271774 )
                    ( xy_box_recursive
                        ( $_1271666 $_1271672 )
                        ( cdr-atom $_1271678 )
                    )
                )
            )
        )
    )
)
(= ( clear_route
        ( $_1271216 $_1271222 $_1271228 k )
        $_1271240 )
    ( let*
        ( ( $_1271270
                ( nth 1 $_1271240 )
            )
            ( $_1271306
                ( nth 2 $_1271240 )
            )
        )
        ( if
            ( and
                ( or
                    ( == $_1271270 $_1271216 )
                    ( or
                        ( == $_1271270
                            ( - $_1271216 1 )
                        )
                        ( == $_1271270
                            ( + $_1271216 1 )
                        )
                    )
                )
                ( or
                    ( == $_1271306 $_1271222 )
                    ( or
                        ( == $_1271306
                            ( - $_1271222 1 )
                        )
                        ( == $_1271306
                            ( + $_1271222 1 )
                        )
                    )
                )
            )
            true false )
    )
)
(= ( clear_route
        ( $_1271024 $_1271030 $_1271036 q )
        $_1271048 )
    ( if
        ( or
            ( clear_route
                ( $_1271024 $_1271030 $_1271036 b )
                $_1271048 )
            ( clear_route
                ( $_1271024 $_1271030 $_1271036 r )
                $_1271048 )
        )
        true false )
)
(= ( clear_route
        ( $_1270430 $_1270436 $_1270442 n )
        $_1270454 )
    ( let*
        ( ( $_1270484
                ( nth 1 $_1270454 )
            )
            ( $_1270520
                ( nth 2 $_1270454 )
            )
        )
        ( if
            ( or
                ( and
                    ( or
                        ( == $_1270484
                            ( - $_1270430 1 )
                        )
                        ( == $_1270484
                            ( + $_1270430 1 )
                        )
                    )
                    ( or
                        ( == $_1270520
                            ( - $_1270436 2 )
                        )
                        ( == $_1270520
                            ( + $_1270436 2 )
                        )
                    )
                )
                ( and
                    ( or
                        ( == $_1270484
                            ( - $_1270430 2 )
                        )
                        ( == $_1270484
                            ( + $_1270430 2 )
                        )
                    )
                    ( or
                        ( == $_1270520
                            ( - $_1270436 1 )
                        )
                        ( == $_1270520
                            ( + $_1270436 1 )
                        )
                    )
                )
            )
            true false )
    )
)
(= ( clear_route
        ( $_1269524 $_1269530 g p )
        $_1269548 )
    ( let*
        ( ( $_1269578
                ( nth 1 $_1269548 )
            )
            ( $_1269614
                ( nth 2 $_1269548 )
            )
            ( $_1269650
                ( return_entire_box $_1269548 )
            )
            ( $_1269680
                ( $_1269578 6 )
            )
            ( $_1269710
                ( return_entire_box $_1269680 )
            )
        )
        ( if
            ( or
                ( and
                    ( == $_1269524 $_1269578 )
                    ( and
                        ( == $_1269614
                            ( - $_1269530 1 )
                        )
                        ( ==
                            ( size-atom $_1269650 )
                            2 )
                    )
                )
                ( or
                    ( and
                        ( == $_1269524 $_1269578 )
                        ( and
                            ( == $_1269530 7 )
                            ( and
                                ( == $_1269614 5 )
                                ( and
                                    ( ==
                                        ( size-atom $_1269650 )
                                        2 )
                                    ( ==
                                        ( size-atom $_1269710 )
                                        2 )
                                )
                            )
                        )
                    )
                    ( or
                        ( and
                            ( == $_1269578
                                ( + $_1269524 1 )
                            )
                            ( and
                                ( == $_1269614
                                    ( - $_1269530 1 )
                                )
                                ( ==
                                    ( size-atom $_1269650 )
                                    4 )
                            )
                        )
                        ( and
                            ( == $_1269578
                                ( - $_1269524 1 )
                            )
                            ( and
                                ( == $_1269614
                                    ( - $_1269530 1 )
                                )
                                ( ==
                                    ( size-atom $_1269650 )
                                    4 )
                            )
                        )
                    )
                )
            )
            true false )
    )
)
(= ( clear_route
        ( $_1268618 $_1268624 s p )
        $_1268642 )
    ( let*
        ( ( $_1268672
                ( nth 1 $_1268642 )
            )
            ( $_1268708
                ( nth 2 $_1268642 )
            )
            ( $_1268744
                ( return_entire_box $_1268642 )
            )
            ( $_1268774
                ( $_1268618 3 )
            )
            ( $_1268804
                ( return_entire_box $_1268774 )
            )
        )
        ( if
            ( or
                ( or
                    ( and
                        ( == $_1268672
                            ( + $_1268618 1 )
                        )
                        ( and
                            ( == $_1268708
                                ( + $_1268624 1 )
                            )
                            ( ==
                                ( size-atom $_1268744 )
                                4 )
                        )
                    )
                    ( and
                        ( == $_1268672
                            ( - $_1268618 1 )
                        )
                        ( and
                            ( == $_1268708
                                ( + $_1268624 1 )
                            )
                            ( ==
                                ( size-atom $_1268744 )
                                4 )
                        )
                    )
                )
                ( or
                    ( and
                        ( == $_1268618 $_1268672 )
                        ( and
                            ( == $_1268708
                                ( + $_1268624 1 )
                            )
                            ( ==
                                ( size-atom $_1268744 )
                                2 )
                        )
                    )
                    ( and
                        ( == $_1268618 $_1268672 )
                        ( and
                            ( == $_1268624 2 )
                            ( and
                                ( == $_1268708 4 )
                                ( and
                                    ( ==
                                        ( size-atom $_1268744 )
                                        2 )
                                    ( ==
                                        ( size-atom $_1268804 )
                                        2 )
                                )
                            )
                        )
                    )
                )
            )
            true false )
    )
)
(= ( clear_route
        ( $_1267964 $_1267970 $_1267976 r )
        $_1267988 )
    ( let*
        ( ( $_1268018
                ( nth 1 $_1267988 )
            )
            ( $_1268054
                ( nth 2 $_1267988 )
            )
            ( $_1268090
                ( if
                    ( and
                        ( == $_1268018 $_1267964 )
                        ( > $_1268054 $_1267970 )
                    )
                    ( clearcheckup $_1267964
                        ( + 1 $_1267970 )
                        $_1268054 )
                    ( if
                        ( and
                            ( == $_1268018 $_1267964 )
                            ( < $_1268054 $_1267970 )
                        )
                        ( clearcheckdown $_1267964
                            ( - $_1267970 1 )
                            $_1268054 )
                        ( if
                            ( and
                                ( > $_1268018 $_1267964 )
                                ( == $_1268054 $_1267970 )
                            )
                            ( clearcheckright
                                ( + $_1267964 1 )
                                $_1268018 $_1267970 )
                            ( if
                                ( and
                                    ( < $_1268018 $_1267964 )
                                    ( == $_1268054 $_1267970 )
                                )
                                ( clearcheckleft
                                    ( - $_1267964 1 )
                                    $_1268018 $_1267970 )
                                false )
                        )
                    )
                )
            )
        )
        $_1268090 )
)
(= ( clearcheckup $_1267682 $_1267688 $_1267694 )
    ( let $_1267712
        ( if
            ( < $_1267688 9 )
            ( return_entire_box
                ( $_1267682 $_1267688 )
            )
            ( )
        )
        ( if
            ( == $_1267688 $_1267694 )
            true
            ( if
                ( ==
                    ( size-atom $_1267712 )
                    2 )
                ( clearcheckup $_1267682
                    ( + $_1267688 1 )
                    $_1267694 )
                false )
        )
    )
)
(= ( clearcheckdown $_1267406 $_1267412 $_1267418 )
    ( let $_1267436
        ( if
            ( > $_1267412 0 )
            ( return_entire_box
                ( $_1267406 $_1267412 )
            )
            ( )
        )
        ( if
            ( == $_1267412 $_1267418 )
            true
            ( if
                ( ==
                    ( size-atom $_1267436 )
                    2 )
                ( clearcheckdown $_1267406
                    ( - $_1267412 1 )
                    $_1267418 )
                false )
        )
    )
)
(= ( clearcheckright $_1267130 $_1267136 $_1267142 )
    ( let $_1267160
        ( if
            ( < $_1267130 9 )
            ( return_entire_box
                ( $_1267130 $_1267142 )
            )
            ( )
        )
        ( if
            ( == $_1267130 $_1267136 )
            true
            ( if
                ( ==
                    ( size-atom $_1267160 )
                    2 )
                ( clearcheckright
                    ( + $_1267130 1 )
                    $_1267136 $_1267142 )
                false )
        )
    )
)
(= ( clearcheckleft $_1266854 $_1266860 $_1266866 )
    ( let $_1266884
        ( if
            ( > $_1266854 0 )
            ( return_entire_box
                ( $_1266854 $_1266866 )
            )
            ( )
        )
        ( if
            ( == $_1266854 $_1266860 )
            true
            ( if
                ( ==
                    ( size-atom $_1266884 )
                    2 )
                ( clearcheckleft
                    ( - $_1266854 1 )
                    $_1266860 $_1266866 )
                false )
        )
    )
)
(= ( clear_route
        ( $_1266110 $_1266116 $_1266122 b )
        $_1266134 )
    ( let*
        ( ( $_1266164
                ( nth 1 $_1266134 )
            )
            ( $_1266200
                ( nth 2 $_1266134 )
            )
            ( $_1266236
                ( if
                    ( and
                        ( > $_1266164 $_1266110 )
                        ( > $_1266200 $_1266116 )
                    )
                    ( clearcheckNE
                        ( + 1 $_1266110 )
                        ( + 1 $_1266116 )
                        $_1266164 $_1266200 )
                    ( if
                        ( and
                            ( > $_1266164 $_1266110 )
                            ( < $_1266200 $_1266116 )
                        )
                        ( clearcheckSE
                            ( + 1 $_1266110 )
                            ( - $_1266116 1 )
                            $_1266164 $_1266200 )
                        ( if
                            ( and
                                ( < $_1266164 $_1266110 )
                                ( > $_1266200 $_1266116 )
                            )
                            ( clearcheckNW
                                ( - $_1266110 1 )
                                ( + $_1266116 1 )
                                $_1266164 $_1266200 )
                            ( if
                                ( and
                                    ( < $_1266164 $_1266110 )
                                    ( < $_1266200 $_1266116 )
                                )
                                ( clearcheckSW
                                    ( - $_1266110 1 )
                                    ( - $_1266116 1 )
                                    $_1266164 $_1266200 )
                                false )
                        )
                    )
                )
            )
        )
        $_1266236 )
)
(= ( clearcheckNE $_1265654 $_1265660 $_1265666 $_1265672 )
    ( let $_1265690
        ( if
            ( and
                ( and
                    ( < $_1265654 9 )
                    ( > $_1265654 0 )
                )
                ( and
                    ( < $_1265660 9 )
                    ( > $_1265660 0 )
                )
            )
            ( return_entire_box
                ( $_1265654 $_1265660 )
            )
            ( )
        )
        ( if
            ( and
                ( == $_1265660 $_1265672 )
                ( == $_1265654 $_1265666 )
            )
            true
            ( if
                ( ==
                    ( size-atom $_1265690 )
                    2 )
                ( clearcheckNE
                    ( + $_1265654 1 )
                    ( + $_1265660 1 )
                    $_1265666 $_1265672 )
                false )
        )
    )
)
(= ( clearcheckSE $_1265204 $_1265210 $_1265216 $_1265222 )
    ( let $_1265240
        ( if
            ( and
                ( and
                    ( < $_1265204 9 )
                    ( > $_1265204 0 )
                )
                ( and
                    ( < $_1265210 9 )
                    ( > $_1265210 0 )
                )
            )
            ( return_entire_box
                ( $_1265204 $_1265210 )
            )
            ( )
        )
        ( if
            ( and
                ( == $_1265210 $_1265222 )
                ( == $_1265204 $_1265216 )
            )
            true
            ( if
                ( ==
                    ( size-atom $_1265240 )
                    2 )
                ( clearcheckSE
                    ( + $_1265204 1 )
                    ( - $_1265210 1 )
                    $_1265216 $_1265222 )
                false )
        )
    )
)
(= ( clearcheckNW $_1264754 $_1264760 $_1264766 $_1264772 )
    ( let $_1264790
        ( if
            ( and
                ( and
                    ( < $_1264754 9 )
                    ( > $_1264754 0 )
                )
                ( and
                    ( < $_1264760 9 )
                    ( > $_1264760 0 )
                )
            )
            ( return_entire_box
                ( $_1264754 $_1264760 )
            )
            ( )
        )
        ( if
            ( and
                ( == $_1264760 $_1264772 )
                ( == $_1264754 $_1264766 )
            )
            true
            ( if
                ( ==
                    ( size-atom $_1264790 )
                    2 )
                ( clearcheckNW
                    ( - $_1264754 1 )
                    ( + $_1264760 1 )
                    $_1264766 $_1264772 )
                false )
        )
    )
)
(= ( clearcheckSW $_1264304 $_1264310 $_1264316 $_1264322 )
    ( let $_1264340
        ( if
            ( and
                ( and
                    ( < $_1264304 9 )
                    ( > $_1264304 0 )
                )
                ( and
                    ( < $_1264310 9 )
                    ( > $_1264310 0 )
                )
            )
            ( return_entire_box
                ( $_1264304 $_1264310 )
            )
            ( )
        )
        ( if
            ( and
                ( == $_1264310 $_1264322 )
                ( == $_1264304 $_1264316 )
            )
            true
            ( if
                ( ==
                    ( size-atom $_1264340 )
                    2 )
                ( clearcheckSW
                    ( - $_1264304 1 )
                    ( - $_1264310 1 )
                    $_1264316 $_1264322 )
                false )
        )
    )
)
( :
    ( replace_square_recursive )
    ( -> Atom Atom Atom Atom Atom Atom Expression Expression )
)
(= ( replace_square_recursive $_1263428 $_1263434 $_1263440 $_1263446 $_1263452 $_1263458 $_1263464 )
    ( if
        ( ==
            ( size-atom $_1263464 )
            0 )
        ( )
        ( let*
            ( ( $_1263548
                    ( car-atom $_1263464 )
                )
                ( $_1263578
                    ( nth 1 $_1263548 )
                )
                ( $_1263614
                    ( nth 2 $_1263548 )
                )
            )
            ( if
                ( and
                    ( == $_1263578 $_1263428 )
                    ( == $_1263614 $_1263434 )
                )
                ( let $_1263728
                    ( $_1263428 $_1263434 )
                    ( let $_1263764
                        ( replace_square_recursive $_1263428 $_1263434 $_1263440 $_1263446 $_1263452 $_1263458
                            ( cdr-atom $_1263464 )
                        )
                        ( cons-atom $_1263728 $_1263764 )
                    )
                )
                ( if
                    ( and
                        ( == $_1263578 $_1263452 )
                        ( == $_1263614 $_1263458 )
                    )
                    ( let $_1263944
                        ( $_1263452 $_1263458 $_1263440 $_1263446 )
                        ( let $_1263764
                            ( replace_square_recursive $_1263428 $_1263434 $_1263440 $_1263446 $_1263452 $_1263458
                                ( cdr-atom $_1263464 )
                            )
                            ( cons-atom $_1263944 $_1263764 )
                        )
                    )
                    ( let $_1263764
                        ( replace_square_recursive $_1263428 $_1263434 $_1263440 $_1263446 $_1263452 $_1263458
                            ( cdr-atom $_1263464 )
                        )
                        ( cons-atom $_1263548 $_1263764 )
                    )
                )
            )
        )
    )
)
(= ( move_piece_on_board $_1262768 $_1262774 $_1262780 )
    ( let*
        ( ( $_1262810
                ( nth 1 $_1262768 )
            )
            ( $_1262846
                ( nth 2 $_1262768 )
            )
            ( $_1262882
                ( nth 3 $_1262768 )
            )
            ( $_1262918
                ( nth 4 $_1262768 )
            )
            ( $_1262954
                ( nth 1 $_1262774 )
            )
            ( $_1262990
                ( nth 2 $_1262774 )
            )
            ( $_1263026
                ( replace_square_recursive $_1262810 $_1262846 $_1262882 $_1262918 $_1262954 $_1262990 $_1262780 )
            )
            ( $_1263092
                ( convert_x_letter $_1262768 )
            )
            ( $_1263122
                ( convert_x_letter $_1262774 )
            )
            ( $_1263152
                ( println
                    ( ( Moving from: $_1263092 to: $_1263122 )
                    )
                )
            )
            ( $_1263226
                ( if
                    ( ==
                        ( size-atom $_1262774 )
                        2 )
                    ( )
                    ( println Piece captured! )
                )
            )
            ( $_1263320
                ( if
                    ( ==
                        ( size-atom $_1262774 )
                        2 )
                    ( )
                    ( println $_1263122 )
                )
            )
        )
        $_1263026 )
)
(= ( reset_square $_1262678 $_1262684 )
    ( remove-atom &self
        ( square $_1262678 $_1262684 $_1262732 $_1262738 )
    )
)
(= ( reset_square $_1262600 $_1262606 )
    ( remove-atom &self
        ( square $_1262600 $_1262606 )
    )
)
(= ( move_piece
        ( $_1262222 $_1262228 $_1262234 $_1262240 )
        ( $_1262252 $_1262258 )
    )
    ( let*
        ( ( $_1262288
                ( square $_1262222 $_1262228 $_1262234 $_1262240 )
            )
            ( $_1262336
                ( remove-atom &self $_1262288 )
            )
            ( $_1262372
                ( square $_1262222 $_1262228 )
            )
            ( $_1262408
                ( add-atom &self $_1262372 )
            )
            ( $_1262444
                ( collapse
                    ( reset_square $_1262252 $_1262258 )
                )
            )
            ( $_1262492
                ( square $_1262252 $_1262258 $_1262234 $_1262240 )
            )
            ( $_1262540
                ( add-atom &self $_1262492 )
            )
        )
        true )
)
(= ( reset_pieces
        ( $_1262066 $_1262072 $_1262078 $_1262084 )
        ( $_1262096 $_1262102 )
    )
    ( let $_1262120
        ( move_piece
            ( $_1262096 $_1262102 $_1262078 $_1262084 )
            ( $_1262066 $_1262072 )
        )
        true )
)
(= ( reset_pieces
        ( $_1261766 $_1261772 $_1261778 $_1261784 )
        ( $_1261796 $_1261802 $_1261808 $_1261814 )
    )
    ( let*
        ( ( $_1261844
                ( move_piece
                    ( $_1261796 $_1261802 $_1261778 $_1261784 )
                    ( $_1261766 $_1261772 )
                )
            )
            ( $_1261916
                ( remove-atom &self
                    ( square $_1261796 $_1261802 )
                )
            )
            ( $_1261970
                ( add-atom &self
                    ( square $_1261796 $_1261802 $_1261808 $_1261814 )
                )
            )
        )
        true )
)
(= ( get_score $_1261562 )
    ( match &self
        ( square $_1261598 $_1261604 $_1261562 $_1261616 )
        ( case $_1261616
            ( ( p 1 )
                ( n 3 )
                ( b 3 )
                ( r 5 )
                ( q 9 )
            )
        )
    )
)
(= ( human_player_attacking )
    ( match &self
        ( square $_1261298 $_1261304 g $_1261316 )
        ( let $_1261334
            ( take_dest
                ( $_1261298 $_1261304 )
                s )
            ( if
                ( == $_1261334 true )
                ( case $_1261316
                    ( ( p 1 )
                        ( n 3 )
                        ( b 3 )
                        ( r 5 )
                        ( q 9 )
                    )
                )
                ( empty )
            )
        )
    )
)
(= ( score_move
        ( $_1260968 $_1260974 $_1260980 $_1260986 )
        ( $_1260998 $_1261004 )
    )
    ( let*
        ( ( $_1261034
                ( collapse
                    ( get_score s )
                )
            )
            ( $_1261076
                ( addit_list $_1261034 )
            )
            ( $_1261106
                ( collapse
                    ( human_player_attacking )
                )
            )
            ( $_1261142
                ( addit_list $_1261106 )
            )
        )
        ( add-atom &self
            ( score $_1260968 $_1260974 $_1260980 $_1260986 $_1260998 $_1261004 $_1261076 $_1261142 )
        )
    )
)
(= ( checkking $_1260758 )
    ( let*
        ( ( $_1260788
                ( xy_box
                    ( $_1260758 k )
                )
            )
            ( $_1260830
                ( return_entire_box $_1260788 )
            )
        )
        ( if
            ( == $_1260758 s )
            ( take_dest $_1260830 g )
            ( take_dest $_1260830 s )
        )
    )
)
(= ( any_moves_to_escape $_1260236 )
    ( match &self
        ( square $_1260272 $_1260278 $_1260236 $_1260290 )
        ( match &self
            ( square $_1260326 $_1260332 )
            ( if
                ( ==
                    ( clear_route
                        ( $_1260272 $_1260278 $_1260236 $_1260290 )
                        ( $_1260326 $_1260332 )
                    )
                    true )
                ( let*
                    ( ( $_1260452
                            ( move_piece
                                ( $_1260272 $_1260278 $_1260236 $_1260290 )
                                ( $_1260326 $_1260332 )
                            )
                        )
                        ( $_1260524
                            ( checkking $_1260236 )
                        )
                        ( $_1260554
                            ( reset_pieces
                                ( $_1260272 $_1260278 $_1260236 $_1260290 )
                                ( $_1260326 $_1260332 )
                            )
                        )
                    )
                    ( if
                        ( == $_1260524 false )
                        ( ( $_1260272 $_1260278 $_1260236 $_1260290 )
                            ( $_1260326 $_1260332 )
                        )
                        ( empty )
                    )
                )
                ( empty )
            )
        )
    )
)
(= ( any_moves_to_escape $_1259624 )
    ( let $_1259642
        ( if
            ( == $_1259624 g )
            s g )
        ( match &self
            ( square $_1259726 $_1259732 $_1259624 $_1259744 )
            ( match &self
                ( square $_1259780 $_1259786 $_1259642 $_1259798 )
                ( if
                    ( ==
                        ( clear_route
                            ( $_1259726 $_1259732 $_1259624 $_1259744 )
                            ( $_1259780 $_1259786 )
                        )
                        true )
                    ( let*
                        ( ( $_1259918
                                ( move_piece
                                    ( $_1259726 $_1259732 $_1259624 $_1259744 )
                                    ( $_1259780 $_1259786 )
                                )
                            )
                            ( $_1259990
                                ( checkking $_1259624 )
                            )
                            ( $_1260020
                                ( reset_pieces
                                    ( $_1259726 $_1259732 $_1259624 $_1259744 )
                                    ( $_1259780 $_1259786 $_1259642 $_1259798 )
                                )
                            )
                        )
                        ( if
                            ( == $_1259990 false )
                            ( ( $_1259726 $_1259732 $_1259624 $_1259744 )
                                ( $_1259780 $_1259786 )
                            )
                            ( empty )
                        )
                    )
                    ( empty )
                )
            )
        )
    )
)
(= ( takingboxes $_1259510 )
    ( match &self
        ( square $_1259546 $_1259552 $_1259510 $_1259564 )
        ( $_1259546 $_1259552 $_1259510 $_1259564 )
    )
)
(= ( takingboxes_recursive $_1259060 $_1259066 )
    ( if
        ( ==
            ( size-atom $_1259066 )
            0 )
        ( )
        ( let $_1259138
            ( car-atom $_1259066 )
            ( if
                ( ==
                    ( size-atom $_1259138 )
                    2 )
                ( let $_1259222
                    ( takingboxes_recursive $_1259060
                        ( cdr-atom $_1259066 )
                    )
                    $_1259222 )
                ( let $_1259282
                    ( nth 3 $_1259138 )
                    ( if
                        ( == $_1259282 $_1259060 )
                        ( let $_1259222
                            ( takingboxes_recursive $_1259060
                                ( cdr-atom $_1259066 )
                            )
                            ( cons-atom $_1259138 $_1259222 )
                        )
                        ( let $_1259222
                            ( takingboxes_recursive $_1259060
                                ( cdr-atom $_1259066 )
                            )
                            $_1259222 )
                    )
                )
            )
        )
    )
)
(= ( list_clear_route $_1258886 $_1258892 )
    ( let*
        ( ( $_1258922
                ( superpose $_1258892 )
            )
            ( $_1258952
                ( clear_route $_1258922 $_1258886 )
            )
        )
        ( if
            ( == $_1258952 true )
            $_1258922
            ( empty )
        )
    )
)
(= ( list_clear_route_recursion $_1258538 $_1258544 )
    ( if
        ( ==
            ( size-atom $_1258544 )
            0 )
        ( )
        ( let*
            ( ( $_1258628
                    ( car-atom $_1258544 )
                )
                ( $_1258658
                    ( clear_route $_1258628 $_1258538 )
                )
            )
            ( if
                ( == $_1258658 true )
                ( let $_1258736
                    ( list_clear_route $_1258538
                        ( cdr-atom $_1258544 )
                    )
                    ( cons-atom $_1258628 $_1258736 )
                )
                ( let $_1258736
                    ( list_clear_route $_1258538
                        ( cdr-atom $_1258544 )
                    )
                    $_1258736 )
            )
        )
    )
)
(= ( chess )
    ( match &self
        ( game-state $_1255118 )
        ( if
            ( == initializing $_1255118 )
            ( progn
                ( change-game-state started )
                ( add-atom &self
                    ( board-state
                        ( ( 1 8 g r )
                            ( 2 8 g n )
                            ( 3 8 g b )
                            ( 4 8 g q )
                            ( 5 8 g k )
                            ( 6 8 g b )
                            ( 7 8 g n )
                            ( 8 8 g r )
                            ( 1 7 g p )
                            ( 2 7 g p )
                            ( 3 7 g p )
                            ( 4 7 g p )
                            ( 5 7 g p )
                            ( 6 7 g p )
                            ( 7 7 g p )
                            ( 8 7 g p )
                            ( 1 6 )
                            ( 2 6 )
                            ( 3 6 )
                            ( 4 6 )
                            ( 5 6 )
                            ( 6 6 )
                            ( 7 6 )
                            ( 8 6 )
                            ( 1 5 )
                            ( 2 5 )
                            ( 3 5 )
                            ( 4 5 )
                            ( 5 5 )
                            ( 6 5 )
                            ( 7 5 )
                            ( 8 5 )
                            ( 1 4 )
                            ( 2 4 )
                            ( 3 4 )
                            ( 4 4 )
                            ( 5 4 )
                            ( 6 4 )
                            ( 7 4 )
                            ( 8 4 )
                            ( 1 3 )
                            ( 2 3 )
                            ( 3 3 )
                            ( 4 3 )
                            ( 5 3 )
                            ( 6 3 )
                            ( 7 3 )
                            ( 8 3 )
                            ( 1 2 s p )
                            ( 2 2 s p )
                            ( 3 2 s p )
                            ( 4 2 s p )
                            ( 5 2 s p )
                            ( 6 2 s p )
                            ( 7 2 s p )
                            ( 8 2 s p )
                            ( 1 1 s r )
                            ( 2 1 s n )
                            ( 3 1 s b )
                            ( 4 1 s q )
                            ( 5 1 s k )
                            ( 6 1 s b )
                            ( 7 1 s n )
                            ( 8 1 s r )
                        )
                    )
                )
                ( welcome )
            )
            ( if
                ( == restarted $_1255118 )
                ( progn
                    ( match &self
                        ( board-state $_1256852 )
                        ( remove-atom &self
                            ( board-state $_1256852 )
                        )
                    )
                    ( add-atom &self
                        ( board-state
                            ( ( 1 8 g r )
                                ( 2 8 g n )
                                ( 3 8 g b )
                                ( 4 8 g q )
                                ( 5 8 g k )
                                ( 6 8 g b )
                                ( 7 8 g n )
                                ( 8 8 g r )
                                ( 1 7 g p )
                                ( 2 7 g p )
                                ( 3 7 g p )
                                ( 4 7 g p )
                                ( 5 7 g p )
                                ( 6 7 g p )
                                ( 7 7 g p )
                                ( 8 7 g p )
                                ( 1 6 )
                                ( 2 6 )
                                ( 3 6 )
                                ( 4 6 )
                                ( 5 6 )
                                ( 6 6 )
                                ( 7 6 )
                                ( 8 6 )
                                ( 1 5 )
                                ( 2 5 s r )
                                ( 3 5 g q )
                                ( 4 5 )
                                ( 5 5 )
                                ( 6 5 )
                                ( 7 5 )
                                ( 8 5 )
                                ( 1 4 )
                                ( 2 4 )
                                ( 3 4 )
                                ( 4 4 )
                                ( 5 4 )
                                ( 6 4 )
                                ( 7 4 )
                                ( 8 4 )
                                ( 1 3 )
                                ( 2 3 )
                                ( 3 3 )
                                ( 4 3 )
                                ( 5 3 )
                                ( 6 3 )
                                ( 7 3 )
                                ( 8 3 )
                                ( 1 2 s p )
                                ( 2 2 s p )
                                ( 3 2 s p )
                                ( 4 2 s p )
                                ( 5 2 s p )
                                ( 6 2 s p )
                                ( 7 2 s p )
                                ( 8 2 s p )
                                ( 1 1 s r )
                                ( 2 1 s n )
                                ( 3 1 s b )
                                ( 4 1 s q )
                                ( 5 1 s k )
                                ( 6 1 s b )
                                ( 7 1 s n )
                                ( 8 1 s r )
                            )
                        )
                    )
                    ( welcome )
                )
                ( empty )
            )
        )
    )
)
(= ( M )
    ( if
        ( ==
            ( game-still-playing )
            false )
        ( println Game over. Please reset to play again
            ( enter r )
            . )
        ( progn
            ( let $_1253444
                ( readln! )
                ( )
            )
            ( let $_1253480
                ( nth 1 $_1253444 )
                ( )
            )
            ( let $_1253528
                ( nth 2 $_1253444 )
                ( )
            )
            ( match &self
                ( board-state $_1253594 )
                $_1253594 )
            ( reset-pieces $_1253594 )
            ( let $_1253636
                ( return_entire_box $_1253480 )
                ( )
            )
            ( if
                ( and
                    ( not
                        ( == $_1253480 $_1253528 )
                    )
                    ( ==
                        ( size-atom $_1253636 )
                        4 )
                )
                ( progn
                    ( let $_1253786
                        ( return_entire_box $_1253480 )
                        ( )
                    )
                    ( let $_1253828
                        ( if
                            ( ==
                                ( size-atom $_1253786 )
                                4 )
                            ( nth 3 $_1253786 )
                            NIL )
                        ( )
                    )
                    ( let $_1253930
                        ( return_entire_box $_1253528 )
                        ( )
                    )
                    ( let $_1253972
                        ( if
                            ( ==
                                ( size-atom $_1253930 )
                                4 )
                            ( nth 3 $_1253930 )
                            NIL )
                        ( )
                    )
                    ( if
                        ( and
                            ( == $_1253828 s )
                            ( or
                                ( ==
                                    ( size-atom $_1253930 )
                                    2 )
                                ( and
                                    ( ==
                                        ( size-atom $_1253930 )
                                        4 )
                                    ( not
                                        ( ==
                                            ( nth 3 $_1253786 )
                                            $_1253972 )
                                    )
                                )
                            )
                        )
                        ( if
                            ( ==
                                ( clear_route $_1253786 $_1253930 )
                                true )
                            ( let*
                                ( ( $_1254338
                                        ( move_piece $_1253786 $_1253528 )
                                    )
                                    ( $_1254374
                                        ( checkking s )
                                    )
                                )
                                ( if
                                    ( == $_1254374 true )
                                    ( println Can't move there, your king would be in check. )
                                    ( progn
                                        ( println Moving your piece... )
                                        ( let $_1254520
                                            ( move_piece_on_board $_1253786 $_1253930 $_1253594 )
                                            ( add-atom &self
                                                ( board-state $_1254520 )
                                            )
                                        )
                                        ( remove-atom &self
                                            ( board-state $_1253594 )
                                        )
                                        ( D )
                                        ( let $_1254652
                                            ( checkking g )
                                            ( if
                                                ( == $_1254652 true )
                                                ( let $_1254724
                                                    ( collapse
                                                        ( any_moves_to_escape g )
                                                    )
                                                    ( if
                                                        ( == $_1254724
                                                            ( )
                                                        )
                                                        ( progn
                                                            ( println Checkmate! You win! )
                                                            ( println Winner! Winner! Winner! )
                                                            ( println )
                                                            ( change-game-state checkmate )
                                                        )
                                                        ( println Check! Enter g for Greedy Chess move. )
                                                    )
                                                )
                                                ( println Enter g for Greedy Chess move. )
                                            )
                                        )
                                    )
                                )
                            )
                            ( println Can't move piece there. )
                        )
                        ( println Invalid move. )
                    )
                )
                ( println Invalid move. )
            )
            ( delete-pieces )
        )
    )
)
(= ( G )
    ( match &self
        ( game-state $_1252048 )
        ( if
            ( or
                ( == checkmate $_1252048 )
                ( == resigned $_1252048 )
            )
            ( println Game over. Please reset to play again
                ( enter r )
                . )
            ( progn
                ( match &self
                    ( board-state $_1252204 )
                    $_1252204 )
                ( reset-pieces $_1252204 )
                ( let $_1252246
                    ( decide_greedy_move )
                    NIL )
                ( if
                    ( == $_1252246
                        ( )
                    )
                    ( let*
                        ( ( $_1252330
                                ( xy_box
                                    ( g k )
                                )
                            )
                            ( $_1252372
                                ( return_entire_box $_1252330 )
                            )
                            ( $_1252402
                                ( take_dest $_1252372 s )
                            )
                        )
                        ( if
                            ( == $_1252402 true )
                            ( progn
                                ( println Checkmate! You win! )
                                ( println Winner! Winner! Winner! )
                                ( println )
                                ( change-game-state checkmate )
                            )
                            ( progn
                                ( println Greedy Chess cannot find a good move. Game over. You win! )
                                ( change-game-state resigned )
                            )
                        )
                    )
                    ( progn
                        ( let $_1252672
                            ( nth 1 $_1252246 )
                            ( )
                        )
                        ( let $_1252720
                            ( nth 2 $_1252246 )
                            ( )
                        )
                        ( let $_1252768
                            ( return_entire_box $_1252720 )
                            ( )
                        )
                        ( move_piece $_1252672 $_1252720 )
                        ( println Greedy Chess moving... )
                        ( let $_1252862
                            ( move_piece_on_board $_1252672 $_1252768 $_1252204 )
                            ( add-atom &self
                                ( board-state $_1252862 )
                            )
                        )
                        ( remove-atom &self
                            ( board-state $_1252204 )
                        )
                        ( D )
                        ( match &self
                            ( game-state $_1253012 )
                            ( if
                                ( == checkmate $_1253012 )
                                ( progn
                                    ( println Checkmate! Greedy Chess wins!!! )
                                    ( println Good game! )
                                    ( println )
                                )
                                ( let $_1253160
                                    ( checkking s )
                                    ( if
                                        ( == $_1253160 true )
                                        ( println Check! )
                                        ( println Your move. )
                                    )
                                )
                            )
                        )
                    )
                )
                ( progn
                    ( delete-pieces )
                    ( $_1252672 $_1252720 $_1252862 )
                )
            )
        )
    )
)
(= ( R )
    ( progn
        ( change-game-state restarted )
        ( chess )
    )
)
(= ( C )
    ( progn
        ( println )
        ( println )
        ( println )
        ( println )
        ( println - Your pieces are white at bottom. )
        ( println - Please take note of the following simple commands: )
        ( println *------- C o m m a n d s ------------* )
        ( println MOVE YOUR PIECE USE example -> m <ENTER> a2a3 <ENTER> )
        ( println Result: YOUR pawn in a2 moved to location a3. )
        ( println Greedy Chess Move
            ( AI )
            -> g )
        ( println Reset & Replay -> r )
        ( println Commands List -> c )
        ( println Display Board -> d )
        ( println Quit -> q )
    )
)
(= ( D )
    ( match &self
        ( board-state $_1251438 )
        ( println $_1251438 )
    )
)
(= ( command-loop )
    ( progn
        ( println Please enter your command. )
        ( let $_1251074
            ( readln! )
            ( case $_1251074
                ( ( m
                        ( M )
                    )
                    ( g
                        ( G )
                    )
                    ( r
                        ( R )
                    )
                    ( c
                        ( C )
                    )
                    ( d
                        ( D )
                    )
                    ( q
                        ( println Quitting MeTTa Greedy Chess. )
                    )
                    ( $_1251284
                        ( println Invalid command, please try again or enter c for a list of commands. )
                    )
                )
            )
        )
        ( if
            ( == $_1251074 q )
            ( )
            ( command-loop )
        )
    )
)
(= ( main_loop )
    ( progn
        ( chess )
        ( command-loop )
    )
)
!(chess)